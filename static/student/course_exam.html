<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学工管理系统</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/layui@2.6.8/dist/css/layui.min.css">
    <style>
        body {
            background-color: #f2f2f2;
            color: #333;
            font-family: "Microsoft YaHei", sans-serif;
        }
        .header {
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 15px 0;
            margin-bottom: 20px;
        }
        .logo {
            font-size: 22px;
            font-weight: bold;
            color: #1E9FFF;
        }
        .user-info {
            text-align: right;
        }
        .page-container {
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
            min-height: 500px;
        }
        .page-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        .filter-bar {
            margin-bottom: 20px;
        }
        .schedule-container {
            overflow-x: auto;
        }
        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #e6e6e6;
        }
        .schedule-table th, .schedule-table td {
            border: 1px solid #e6e6e6;
            text-align: center;
            vertical-align: middle;
            padding: 8px;
        }
        .schedule-table th {
            background-color: #f8f8f8;
            font-weight: bold;
        }
        .time-cell {
            background-color: #f0f8ff;
            width: 80px;
            font-weight: bold;
        }
        .course-item {
            background-color: #e6f7ff;
            border-left: 3px solid #1E9FFF;
            padding: 8px;
            border-radius: 4px;
            margin-bottom: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
            text-align: left;
        }
        .course-item:hover {
            background-color: #d0e9ff;
        }
        .course-name {
            font-weight: bold;
            font-size: 14px;
        }
        .course-detail {
            font-size: 12px;
            color: #666;
            margin-top: 2px;
        }
        .exam-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        .exam-item:hover {
            background-color: #f8f8f8;
        }
        .exam-info {
            flex: 1;
        }
        .exam-name {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 5px;
        }
        .exam-detail {
            display: flex;
            gap: 20px;
            color: #666;
            font-size: 14px;
        }
        .exam-score {
            font-weight: bold;
            color: #1E9FFF;
            min-width: 60px;
            text-align: right;
        }
        .no-data {
            padding: 40px;
            text-align: center;
            color: #999;
        }
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #fff;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            border-top: 1px solid #e6e6e6;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.05);
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            font-size: 12px;
            color: #666;
            cursor: pointer;
        }
        .nav-item.active {
            color: #1E9FFF;
        }
        .nav-icon {
            font-size: 20px;
        }
        .info-row {
            display: flex;
            margin-bottom: 15px;
        }
        .info-label {
            width: 100px;
            color: #666;
        }
        .info-value {
            flex: 1;
        }
        .empty-cell {
            min-height: 80px;
        }
        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
        .api-status {
            margin-top: 10px;
            font-size: 12px;
            color: #666;
        }
        @media (max-width: 768px) {
            .schedule-table th, .schedule-table td {
                padding: 5px;
                font-size: 12px;
            }
            .exam-detail {
                flex-direction: column;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <!-- 顶部导航 -->
    <div class="header">
        <div class="layui-container">
            <div class="layui-row">
                <div class="layui-col-md6">
                    <div class="logo">学工管理系统</div>
                </div>
                <div class="layui-col-md6">
                    <div class="user-info">
                        <span id="student-name">加载中...</span>
                        <i class="layui-icon layui-icon-username" style="margin-left: 10px;"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="layui-container">
        <!-- 页面切换 -->
        <div class="layui-tab layui-tab-brief" lay-filter="page-tabs">
            <ul class="layui-tab-title">
                <li class="layui-this">我的课表</li>
                <li>我的考试安排</li>
            </ul>
            <div class="layui-tab-content">
                <!-- 课表页面 -->
                <div class="layui-tab-item layui-show">
                    <div class="page-container">
                        <div class="page-title">我的课表</div>
                        
                        <!-- 筛选区域 -->
                        <div class="filter-bar">
                            <div class="layui-form">
                                <div class="layui-form-item">
                                    <div class="layui-inline">
                                        <label class="layui-form-label">周次</label>
                                        <div class="layui-input-inline">
                                            <select id="week-select" lay-filter="week-select">
                                                <option value="1">第1周</option>
                                                <option value="2">第2周</option>
                                                <option value="3" selected>第3周</option>
                                                <option value="4">第4周</option>
                                                <option value="5">第5周</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="layui-inline">
                                        <label class="layui-form-label">学期</label>
                                        <div class="layui-input-inline">
                                            <select id="semester-select" lay-filter="semester-select">
                                                <option value="1">大一上</option>
                                                <option value="2">大一下</option>
                                                <option value="3">大二上</option>
                                                <option value="4">大二下</option>
                                                <option value="5" selected>大三上</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="api-status" id="schedule-api-status"></div>
                        </div>
                        
                        <!-- 课表主体 -->
                        <div class="schedule-container">
                            <div id="schedule-loading" class="loading">
                                <i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i> 正在加载课表数据...
                            </div>
                            <table class="schedule-table" id="schedule-table" style="display: none;">
                                <thead>
                                    <tr>
                                        <th class="time-cell">时间/日期</th>
                                        <th>周一<br><span id="monday-date">9月2日</span></th>
                                        <th>周二<br><span id="tuesday-date">9月3日</span></th>
                                        <th>周三<br><span id="wednesday-date">9月4日</span></th>
                                        <th>周四<br><span id="thursday-date">9月5日</span></th>
                                        <th>周五<br><span id="friday-date">9月6日</span></th>
                                        <th>周六<br><span id="saturday-date">9月7日</span></th>
                                        <th>周日<br><span id="sunday-date">9月8日</span></th>
                                    </tr>
                                </thead>
                                <tbody id="schedule-body">
                                    <!-- 课表内容将通过JavaScript动态生成 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- 考试安排页面 -->
                <div class="layui-tab-item">
                    <div class="page-container">
                        <div class="page-title">我的考试安排</div>
                        
                        <!-- 筛选区域 -->
                        <div class="filter-bar">
                            <div class="layui-form">
                                <div class="layui-form-item">
                                    <div class="layui-inline">
                                        <label class="layui-form-label">学期</label>
                                        <div class="layui-input-inline">
                                            <select id="exam-semester" lay-filter="exam-semester">
                                                <option value="1">大一上</option>
                                                <option value="2">大一下</option>
                                                <option value="3">大二上</option>
                                                <option value="4">大二下</option>
                                                <option value="5" selected>大三上</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="layui-inline">
                                        <label class="layui-form-label">时间</label>
                                        <div class="layui-input-inline">
                                            <select id="exam-month" lay-filter="exam-month">
                                                <option value="all">全部时间</option>
                                                <option value="9">9月</option>
                                                <option value="10">10月</option>
                                                <option value="11">11月</option>
                                                <option value="12">12月</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="layui-inline">
                                        <label class="layui-form-label">科目</label>
                                        <div class="layui-input-inline">
                                            <select id="exam-type" lay-filter="exam-type">
                                                <option value="all">全部科目</option>
                                                <option value="major">专业课</option>
                                                <option value="public">公共课</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="layui-inline">
                                        <button class="layui-btn layui-btn-normal" id="query-btn">查询</button>
                                    </div>
                                </div>
                            </div>
                            <div class="api-status" id="exam-api-status"></div>
                        </div>
                        
                        <!-- 考试列表 -->
                        <div class="exam-list">
                            <div id="exam-loading" class="loading">
                                <i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i> 正在加载考试数据...
                            </div>
                            <div id="exam-list-content" style="display: none;">
                                <!-- 考试内容将通过JavaScript动态生成 -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    
    <script src="https://cdn.jsdelivr.net/npm/layui@2.6.8/dist/layui.min.js"></script>
    <script>
        // 模拟后端API
        class StudentSystemAPI {
            constructor() {
                this.baseURL = 'https://api.studentsystem.com/v1';
                this.studentId = '20230001'; // 模拟学生ID
            }
            
            // 模拟API请求延迟
            async delay(ms = 500) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
            
            // 获取学生信息
            async getStudentInfo() {
                await this.delay(300);
                return {
                    id: this.studentId,
                    name: '张三',
                    class: '计算机科学与技术3班',
                    grade: '大三',
                    department: '计算机学院'
                };
            }
            
            // 获取课表数据
            async getSchedule(week, semester) {
                await this.delay(800);
                
                // 模拟不同周次的课表数据
                const scheduleData = {
                    1: this.generateScheduleData(1),
                    2: this.generateScheduleData(2),
                    3: this.generateScheduleData(3),
                    4: this.generateScheduleData(4),
                    5: this.generateScheduleData(5)
                };
                
                return {
                    week: week,
                    semester: semester,
                    dates: this.generateWeekDates(week),
                    schedule: scheduleData[week] || scheduleData[3]
                };
            }
            
            // 生成周日期
            generateWeekDates(week) {
                const baseDate = new Date('2023-09-04'); // 学期开始日期
                const startDate = new Date(baseDate);
                startDate.setDate(baseDate.getDate() + (week - 1) * 7);
                
                const dates = [];
                for (let i = 0; i < 7; i++) {
                    const date = new Date(startDate);
                    date.setDate(startDate.getDate() + i);
                    dates.push({
                        day: i + 1,
                        date: date.toLocaleDateString('zh-CN', {month: 'long', day: 'numeric'})
                    });
                }
                
                return dates;
            }
            
            // 生成课表数据
            generateScheduleData(week) {
                // 模拟课程数据
                const courses = [
                    { id: 1, name: '数据结构', teacher: '王老师', location: '软字栈A301', timeSlot: 1, day: 3, credit: 3 },
                    { id: 2, name: '计算机网络', teacher: '李老师', location: '实验栈B205', timeSlot: 1, day: 5, credit: 3 },
                    { id: 3, name: '操作系统', teacher: '刘老师', location: '软字栈A402', timeSlot: 2, day: 1, credit: 3 },
                    { id: 4, name: '数据库原理', teacher: '陈老师', location: '实验栈B102', timeSlot: 2, day: 4, credit: 3 },
                    { id: 5, name: '软件工程', teacher: '张老师', location: '软字栈A215', timeSlot: 3, day: 2, credit: 2 },
                    { id: 6, name: '人工智能', teacher: '赵老师', location: '实验栈C301', timeSlot: 3, day: 5, credit: 3 },
                    { id: 7, name: 'Web开发', teacher: '孙老师', location: '实验栈B305', timeSlot: 4, day: 1, credit: 2 },
                    { id: 8, name: '算法设计', teacher: '周老师', location: '软字栈A105', timeSlot: 4, day: 3, credit: 3 }
                ];
                
                // 根据周次调整部分课程
                if (week === 2) {
                    // 第二周某些课程调整
                    courses[0].location = '软字栈A302';
                    courses[3].teacher = '陈老师(代课)';
                } else if (week === 4) {
                    // 第四周某些课程调整
                    courses[1].timeSlot = 2;
                    courses[1].day = 4;
                }
                
                return courses;
            }
            
            // 获取考试安排
            async getExams(semester, month, type) {
                await this.delay(600);
                
                // 模拟考试数据
                let exams = [
                    {
                        id: 1,
                        name: '数据结构',
                        location: '软字栈A301',
                        time: '2023-11-15 09:00-11:00',
                        score: 92,
                        type: 'major',
                        month: 11,
                        form: '闭卷笔试',
                        weight: '总成绩的60%',
                        notice: '请携带学生证和身份证参加考试，考试开始15分钟后不得入场。'
                    },
                    {
                        id: 2,
                        name: '计算机网络',
                        location: '实验栈B205',
                        time: '2023-11-20 14:30-16:30',
                        score: 88,
                        type: 'major',
                        month: 11,
                        form: '闭卷笔试',
                        weight: '总成绩的60%',
                        notice: '请携带学生证和身份证参加考试，考试开始15分钟后不得入场。'
                    },
                    {
                        id: 3,
                        name: '操作系统',
                        location: '软字栈A402',
                        time: '2023-12-05 09:00-11:00',
                        score: null,
                        type: 'major',
                        month: 12,
                        form: '闭卷笔试',
                        weight: '总成绩的60%',
                        notice: '请携带学生证和身份证参加考试，考试开始15分钟后不得入场。'
                    },
                    {
                        id: 4,
                        name: '数据库原理',
                        location: '实验栈B102',
                        time: '2023-12-10 14:30-16:30',
                        score: null,
                        type: 'major',
                        month: 12,
                        form: '闭卷笔试',
                        weight: '总成绩的60%',
                        notice: '请携带学生证和身份证参加考试，考试开始15分钟后不得入场。'
                    },
                    {
                        id: 5,
                        name: '大学英语',
                        location: '文理楼A101',
                        time: '2023-10-25 14:00-16:00',
                        score: 85,
                        type: 'public',
                        month: 10,
                        form: '闭卷笔试',
                        weight: '总成绩的50%',
                        notice: '请携带2B铅笔和橡皮，听力部分需要自备耳机。'
                    }
                ];
                
                // 根据筛选条件过滤
                if (month !== 'all') {
                    exams = exams.filter(exam => exam.month === parseInt(month));
                }
                
                if (type !== 'all') {
                    exams = exams.filter(exam => exam.type === type);
                }
                
                return {
                    semester: semester,
                    filters: { month, type },
                    exams: exams
                };
            }
            
            // 获取课程详情
            async getCourseDetail(courseId) {
                await this.delay(300);
                
                const courseDetails = {
                    1: {
                        id: 1,
                        name: '数据结构',
                        teacher: '王老师',
                        location: '软字栈A301',
                        time: '周三 8:10-9:45',
                        credit: '3学分',
                        description: '本课程介绍数据结构的基本概念、算法设计与分析，包括线性表、树、图等常用数据结构及其应用。',
                        department: '计算机学院',
                        contact: 'wang@university.edu.cn',
                        textbook: '《数据结构与算法分析》'
                    },
                    2: {
                        id: 2,
                        name: '计算机网络',
                        teacher: '李老师',
                        location: '实验栈B205',
                        time: '周五 8:10-9:45',
                        credit: '3学分',
                        description: '本课程介绍计算机网络的基本原理、协议和体系结构，包括物理层、数据链路层、网络层、传输层和应用层。',
                        department: '计算机学院',
                        contact: 'li@university.edu.cn',
                        textbook: '《计算机网络：自顶向下方法》'
                    },
                    3: {
                        id: 3,
                        name: '操作系统',
                        teacher: '刘老师',
                        location: '软字栈A402',
                        time: '周一 10:15-11:50',
                        credit: '3学分',
                        description: '本课程介绍操作系统的基本概念、原理和设计方法，包括进程管理、内存管理、文件系统和设备管理。',
                        department: '计算机学院',
                        contact: 'liu@university.edu.cn',
                        textbook: '《操作系统概念》'
                    },
                    4: {
                        id: 4,
                        name: '数据库原理',
                        teacher: '陈老师',
                        location: '实验栈B102',
                        time: '周四 10:15-11:50',
                        credit: '3学分',
                        description: '本课程介绍数据库系统的基本概念、关系模型、SQL语言、数据库设计和事务处理等。',
                        department: '计算机学院',
                        contact: 'chen@university.edu.cn',
                        textbook: '《数据库系统概念》'
                    }
                };
                
                return courseDetails[courseId] || courseDetails[1];
            }
        }

        // 应用主逻辑
        document.addEventListener('DOMContentLoaded', function() {
            const api = new StudentSystemAPI();
            let currentStudent = null;
            
            // 初始化Layui组件
            layui.use(['element', 'form', 'layer'], function(){
                var element = layui.element;
                var form = layui.form;
                var layer = layui.layer;
                
                // 初始化应用
                initApp();
                
                // 初始化应用
                async function initApp() {
                    try {
                        // 获取学生信息
                        currentStudent = await api.getStudentInfo();
                        document.getElementById('student-name').textContent = currentStudent.name;
                        
                        // 加载初始数据
                        await loadScheduleData();
                        await loadExamData();
                    } catch (error) {
                        console.error('初始化应用失败:', error);
                        layer.msg('初始化应用失败，请刷新页面重试', {icon: 2});
                    }
                }
                
                // 加载课表数据
                async function loadScheduleData() {
                    const weekSelect = document.getElementById('week-select');
                    const semesterSelect = document.getElementById('semester-select');
                    const week = weekSelect.value;
                    const semester = semesterSelect.value;
                    
                    try {
                        document.getElementById('schedule-loading').style.display = 'block';
                        document.getElementById('schedule-table').style.display = 'none';
                        document.getElementById('schedule-api-status').textContent = '正在请求课表数据...';
                        
                        const scheduleData = await api.getSchedule(parseInt(week), semester);
                        
                        // 更新日期显示
                        updateWeekDates(scheduleData.dates);
                        
                        // 渲染课表
                        renderSchedule(scheduleData.schedule);
                        
                        document.getElementById('schedule-loading').style.display = 'none';
                        document.getElementById('schedule-table').style.display = 'table';
                        document.getElementById('schedule-api-status').textContent = `数据更新时间: ${new Date().toLocaleTimeString()}`;
                        
                    } catch (error) {
                        console.error('加载课表数据失败:', error);
                        document.getElementById('schedule-api-status').textContent = '数据加载失败，请重试';
                        layer.msg('课表数据加载失败', {icon: 2});
                    }
                }
                
                // 更新周日期显示
                function updateWeekDates(dates) {
                    document.getElementById('monday-date').textContent = dates[0].date;
                    document.getElementById('tuesday-date').textContent = dates[1].date;
                    document.getElementById('wednesday-date').textContent = dates[2].date;
                    document.getElementById('thursday-date').textContent = dates[3].date;
                    document.getElementById('friday-date').textContent = dates[4].date;
                    document.getElementById('saturday-date').textContent = dates[5].date;
                    document.getElementById('sunday-date').textContent = dates[6].date;
                }
                
                // 渲染课表
                function renderSchedule(courses) {
                    const scheduleBody = document.getElementById('schedule-body');
                    scheduleBody.innerHTML = '';
                    
                    // 定义时间段
                    const timeSlots = [
                        { id: 1, time: '8:10-9:45' },
                        { id: 2, time: '10:15-11:50' },
                        { id: 3, time: '14:00-15:35' },
                        { id: 4, time: '16:05-17:40' }
                    ];
                    
                    // 创建课表行
                    timeSlots.forEach(timeSlot => {
                        const row = document.createElement('tr');
                        
                        // 时间单元格
                        const timeCell = document.createElement('td');
                        timeCell.className = 'time-cell';
                        timeCell.textContent = timeSlot.time;
                        row.appendChild(timeCell);
                        
                        // 每天的课程单元格
                        for (let day = 1; day <= 7; day++) {
                            const cell = document.createElement('td');
                            cell.className = 'empty-cell';
                            
                            // 查找该时间段该天的课程
                            const course = courses.find(c => 
                                c.timeSlot === timeSlot.id && c.day === day
                            );
                            
                            if (course) {
                                const courseItem = document.createElement('div');
                                courseItem.className = 'course-item';
                                courseItem.setAttribute('data-course', course.id);
                                
                                courseItem.innerHTML = `
                                    <div class="course-name">${course.name}</div>
                                    <div class="course-detail">@${course.location}</div>
                                    <div class="course-detail">${course.teacher}</div>
                                `;
                                
                                // 添加点击事件
                                courseItem.addEventListener('click', function() {
                                    showCourseDetail(course.id);
                                });
                                
                                cell.innerHTML = '';
                                cell.appendChild(courseItem);
                            }
                            
                            row.appendChild(cell);
                        }
                        
                        scheduleBody.appendChild(row);
                    });
                }
                
                // 显示课程详情
                async function showCourseDetail(courseId) {
                    try {
                        const courseDetail = await api.getCourseDetail(courseId);
                        
                        layer.open({
                            type: 1,
                            title: '课程详情',
                            area: ['500px', '450px'],
                            content: `
                                <div style="padding: 20px;">
                                    <div class="info-row">
                                        <div class="info-label">课程名称：</div>
                                        <div class="info-value">${courseDetail.name}</div>
                                    </div>
                                    <div class="info-row">
                                        <div class="info-label">授课教师：</div>
                                        <div class="info-value">${courseDetail.teacher}</div>
                                    </div>
                                    <div class="info-row">
                                        <div class="info-label">上课地点：</div>
                                        <div class="info-value">${courseDetail.location}</div>
                                    </div>
                                    <div class="info-row">
                                        <div class="info-label">上课时间：</div>
                                        <div class="info-value">${courseDetail.time}</div>
                                    </div>
                                    <div class="info-row">
                                        <div class="info-label">课程学分：</div>
                                        <div class="info-value">${courseDetail.credit}</div>
                                    </div>
                                    <div class="info-row">
                                        <div class="info-label">所属院系：</div>
                                        <div class="info-value">${courseDetail.department}</div>
                                    </div>
                                    <div class="info-row">
                                        <div class="info-label">教材信息：</div>
                                        <div class="info-value">${courseDetail.textbook}</div>
                                    </div>
                                    <div class="info-row">
                                        <div class="info-label">教师邮箱：</div>
                                        <div class="info-value">${courseDetail.contact}</div>
                                    </div>
                                    <div class="info-row">
                                        <div class="info-label">课程简介：</div>
                                        <div class="info-value">${courseDetail.description}</div>
                                    </div>
                                </div>
                            `
                        });
                    } catch (error) {
                        console.error('获取课程详情失败:', error);
                        layer.msg('获取课程详情失败', {icon: 2});
                    }
                }
                
                // 加载考试数据
                async function loadExamData() {
                    const semesterSelect = document.getElementById('exam-semester');
                    const monthSelect = document.getElementById('exam-month');
                    const typeSelect = document.getElementById('exam-type');
                    
                    const semester = semesterSelect.value;
                    const month = monthSelect.value;
                    const type = typeSelect.value;
                    
                    try {
                        document.getElementById('exam-loading').style.display = 'block';
                        document.getElementById('exam-list-content').style.display = 'none';
                        document.getElementById('exam-api-status').textContent = '正在请求考试数据...';
                        
                        const examData = await api.getExams(semester, month, type);
                        
                        // 渲染考试列表
                        renderExamList(examData.exams);
                        
                        document.getElementById('exam-loading').style.display = 'none';
                        document.getElementById('exam-list-content').style.display = 'block';
                        document.getElementById('exam-api-status').textContent = `数据更新时间: ${new Date().toLocaleTimeString()}`;
                        
                    } catch (error) {
                        console.error('加载考试数据失败:', error);
                        document.getElementById('exam-api-status').textContent = '数据加载失败，请重试';
                        layer.msg('考试数据加载失败', {icon: 2});
                    }
                }
                
                // 渲染考试列表
                function renderExamList(exams) {
                    const examListContent = document.getElementById('exam-list-content');
                    
                    if (exams.length === 0) {
                        examListContent.innerHTML = '<div class="no-data">暂无考试数据</div>';
                        return;
                    }
                    
                    let html = '';
                    exams.forEach(exam => {
                        html += `
                            <div class="exam-item" data-exam="${exam.id}">
                                <div class="exam-info">
                                    <div class="exam-name">${exam.name}</div>
                                    <div class="exam-detail">
                                        <span>考试地点：${exam.location}</span>
                                        <span>考试时间：${exam.time}</span>
                                    </div>
                                </div>
                                <div class="exam-score">${exam.score || ''}</div>
                            </div>
                        `;
                    });
                    
                    examListContent.innerHTML = html;
                    
                    // 添加考试详情点击事件
                    document.querySelectorAll('.exam-item').forEach(item => {
                        item.addEventListener('click', function() {
                            const examId = parseInt(this.getAttribute('data-exam'));
                            const exam = exams.find(e => e.id === examId);
                            if (exam) {
                                showExamDetail(exam);
                            }
                        });
                    });
                }
                
                // 显示考试详情
                function showExamDetail(exam) {
                    layer.open({
                        type: 1,
                        title: '考试详情',
                        area: ['500px', '400px'],
                        content: `
                            <div style="padding: 20px;">
                                <div class="info-row">
                                    <div class="info-label">考试科目：</div>
                                    <div class="info-value">${exam.name}</div>
                                </div>
                                <div class="info-row">
                                    <div class="info-label">考试地点：</div>
                                    <div class="info-value">${exam.location}</div>
                                </div>
                                <div class="info-row">
                                    <div class="info-label">考试时间：</div>
                                    <div class="info-value">${exam.time}</div>
                                </div>
                                <div class="info-row">
                                    <div class="info-label">考试形式：</div>
                                    <div class="info-value">${exam.form}</div>
                                </div>
                                <div class="info-row">
                                    <div class="info-label">成绩占比：</div>
                                    <div class="info-value">${exam.weight}</div>
                                </div>
                                <div class="info-row">
                                    <div class="info-label">考试成绩：</div>
                                    <div class="info-value">${exam.score || '未公布'}</div>
                                </div>
                                <div class="info-row">
                                    <div class="info-label">注意事项：</div>
                                    <div class="info-value">${exam.notice}</div>
                                </div>
                            </div>
                        `
                    });
                }
                
                // 筛选条件变化事件
                form.on('select(week-select)', function(data) {
                    loadScheduleData();
                });
                
                form.on('select(semester-select)', function(data) {
                    loadScheduleData();
                });
                
                form.on('select(exam-semester)', function(data) {
                    loadExamData();
                });
                
                form.on('select(exam-month)', function(data) {
                    loadExamData();
                });
                
                form.on('select(exam-type)', function(data) {
                    loadExamData();
                });
                
                // 查询按钮事件
                document.getElementById('query-btn').addEventListener('click', function() {
                    loadExamData();
                });
            });
        });
    </script>
</body>
</html>